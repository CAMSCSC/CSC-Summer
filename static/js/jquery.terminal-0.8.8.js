!function(e){function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,n){for(var t=[];n>0;t[--n]=e);return t.join("")}var r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};r.format=function(e,i){var o,a,s,l,c,u,f,p=1,h=e.length,m="",g=[];for(a=0;h>a;a++)if(m=n(e[a]),"string"===m)g.push(e[a]);else if("array"===m){if(l=e[a],l[2])for(o=i[p],s=0;s<l[2].length;s++){if(!o.hasOwnProperty(l[2][s]))throw r('[sprintf] property "%s" does not exist',l[2][s]);o=o[l[2][s]]}else o=l[1]?i[l[1]]:i[p++];if(/[^s]/.test(l[8])&&"number"!=n(o))throw r("[sprintf] expecting number but found %s",n(o));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-String(o).length,c=l[6]?t(u,f):"",g.push(l[5]?o+c:c+o)}return g.join("")},r.cache={},r.parse=function(e){for(var n=e,t=[],r=[],i=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";if(t[2]){i|=1;var o=[],a=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(t)}n=n.substring(t[0].length)}return r};var i=function(e,n,t){return t=n.slice(0),t.splice(0,0,e),r.apply(null,t)};e.sprintf=r,e.vsprintf=i}("undefined"!=typeof exports?exports:window),function(e,n){"use strict";function t(e,n){var t;if("string"==typeof e&&"string"==typeof n)return localStorage[e]=n,!0;if("object"==typeof e&&"undefined"==typeof n){for(t in e)e.hasOwnProperty(t)&&(localStorage[t]=e[t]);return!0}return!1}function r(e,n){var t,r,i;if(t=new Date,t.setTime(t.getTime()+31536e6),r="; expires="+t.toGMTString(),"string"==typeof e&&"string"==typeof n)return document.cookie=e+"="+n+r+"; path=/",!0;if("object"==typeof e&&"undefined"==typeof n){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function i(e){return localStorage[e]}function o(e){var n,t,r,i;for(n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(i=t[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null}function a(e){return delete localStorage[e]}function s(e){return r(e,"",-1)}function l(e,n){var t=[],r=e.length;if(n>r)return[e];for(var i=0;r>i;i+=n)t.push(e.substring(i,i+n));return t}function c(n){var t=n?[n]:[],r=0;e.extend(this,{get:function(){return t},rotate:function(){return 1===t.length?t[0]:(r===t.length-1?r=0:++r,t[r])},length:function(){return t.length},set:function(e){for(var n=t.length;n--;)if(t[n]===e)return void(r=n);this.append(e)},front:function(){return t[r]},append:function(e){t.push(e)}})}function u(n){var t=n?[n]:[];e.extend(this,{map:function(n){return e.map(t,n)},size:function(){return t.length},pop:function(){if(0===t.length)return null;var e=t[t.length-1];return t=t.slice(0,t.length-1),e},push:function(e){return t=t.concat([e]),e},top:function(){return t.length>0?t[t.length-1]:null}})}function f(n,t){var r=!0,i="";"string"==typeof n&&""!==n&&(i=n+"_"),i+="commands";var o=e.Storage.get(i);o=o?e.parseJSON(o):[];var a=o.length-1;e.extend(this,{append:function(n){r&&o[o.length-1]!==n&&(o.push(n),t&&o.length>t&&(o=o.slice(-t)),a=o.length-1,e.Storage.set(i,e.json_stringify(o)))},data:function(){return o},reset:function(){a=o.length-1},last:function(){return o[length-1]},end:function(){return a===o.length-1},position:function(){return a},current:function(){return o[a]},next:function(){return a<o.length-1&&++a,-1!==a?o[a]:void 0},previous:function(){var e=a;return a>0&&--a,-1!==e?o[a]:void 0},clear:function(){o=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(i)},disable:function(){r=!1}})}function p(n){return e("<div>"+e.terminal.strip(n)+"</div>").text().length}function h(){var e=!1,t="animation",r="",i="Webkit Moz O ms Khtml".split(" "),o="",a=document.createElement("div");if(a.style.animationName&&(e=!0),e===!1)for(var s=0;s<i.length;s++)if(a.style[i[s]+"AnimationName"]!==n){o=i[s],t=o+"Animation",r="-"+o.toLowerCase()+"-",e=!0;break}return e}function m(e,n){var t=e.replace(/^\s+|\s+$/g,"").split(/(\s+)/),r=e.replace(/^[^\s]+\s*/,"");return{name:t[0],args:n(r),rest:r}}function g(n){var t=e(window).scrollTop(),r=t+e(window).height(),i=e(n).offset().top,o=i+e(n).height();return o>=t&&r>=i}function d(){var n=e('<div class="terminal"><div class="cmd"><span>&nbsp;</span></div></div>').appendTo(".terminal-wrapper"),t=n.find("span"),r={width:t.width(),height:t.outerHeight()};return n.remove(),r}function F(){for(var n=e('<div class="terminal"><div class="cmd"><span id="testspan">0</span></div></div>').appendTo(".terminal-wrapper"),t=n.find("span"),r=t.height(),i=0;t.height()===r&&500>i;)i+=1,t.append("0");return n.remove(),i}function y(e){return Math.floor(e.height()/d().height)}function v(){if(window.getSelection||document.getSelection){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}return document.selection?document.selection.createRange().text:void 0}function _(e){return e.get(0).scrollHeight>e.innerHeight()}e.omap=function(n,t){var r={};return e.each(n,function(e,i){r[e]=t.call(n,e,i)}),r};var w="undefined"!=typeof window.localStorage;e.extend({Storage:{set:w?t:r,get:w?i:o,remove:w?a:s}}),jQuery.fn.extend({everyTime:function(e,n,t,r,i){return this.each(function(){jQuery.timer.add(this,e,n,t,r,i)})},oneTime:function(e,n,t){return this.each(function(){jQuery.timer.add(this,e,n,t,1)})},stopTime:function(e,n){return this.each(function(){jQuery.timer.remove(this,e,n)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===n||null===e)return null;var t=this.regex.exec(jQuery.trim(e.toString()));if(t[2]){var r=parseInt(t[1],10),i=this.powers[t[2]]||1;return r*i}return e},add:function(e,n,t,r,i,o){var a=0;if(jQuery.isFunction(t)&&(i||(i=r),r=t,t=n),n=jQuery.timer.timeParse(n),!("number"!=typeof n||isNaN(n)||0>=n)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[t]||(e.$timers[t]={}),r.$timerID=r.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>i&&0!==i||r.call(e,a)===!1)&&jQuery.timer.remove(e,t,r),s.inProgress=!1)};s.$timerID=r.$timerID,e.$timers[t][r.$timerID]||(e.$timers[t][r.$timerID]=window.setInterval(s,n)),this.global[t]||(this.global[t]=[]),this.global[t].push(e)}},remove:function(e,n,t){var r,i=e.$timers;if(i){if(n){if(i[n]){if(t)t.$timerID&&(window.clearInterval(i[n][t.$timerID]),delete i[n][t.$timerID]);else for(var o in i[n])i[n].hasOwnProperty(o)&&(window.clearInterval(i[n][o]),delete i[n][o]);for(r in i[n])if(i[n].hasOwnProperty(r))break;r||(r=null,delete i[n])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,t);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&jQuery(window).one("unload",function(){var e=jQuery.timer.global;for(var n in e)if(e.hasOwnProperty(n))for(var t=e[n],r=t.length;--r;)jQuery.timer.remove(t[r],n)}),function(e){if(String.prototype.split.toString().match(/\[native/)){var n,t=String.prototype.split,r=/()??/.exec("")[1]===e;return n=function(n,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return t.call(n,i,o);var a,s,l,c,u=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),p=0;for(i=new RegExp(i.source,f+"g"),n+="",r||(a=new RegExp("^"+i.source+"$(?!\\s)",f)),o=o===e?-1>>>0:o>>>0;(s=i.exec(n))&&(l=s.index+s[0].length,!(l>p&&(u.push(n.slice(p,s.index)),!r&&s.length>1&&s[0].replace(a,function(){for(var n=1;n<arguments.length-2;n++)arguments[n]===e&&(s[n]=e)}),s.length>1&&s.index<n.length&&Array.prototype.push.apply(u,s.slice(1)),c=s[0].length,p=l,u.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return p===n.length?(c||!i.test(""))&&u.push(""):u.push(n.slice(p)),u.length>o?u.slice(0,o):u},String.prototype.split=function(e,t){return n(this,e,t)},n}}(),e.json_stringify=function(t,r){var i,o="";r=r===n?1:r;var a=typeof t;switch(a){case"function":o+=t;break;case"boolean":o+=t?"true":"false";break;case"object":if(null===t)o+="null";else if(t instanceof Array){o+="[";var s=t.length;for(i=0;s-1>i;++i)o+=e.json_stringify(t[i],r+1);o+=e.json_stringify(t[s-1],r+1)+"]"}else{o+="{";for(var l in t)t.hasOwnProperty(l)&&(o+='"'+l+'":'+e.json_stringify(t[l],r+1));o+="}"}break;case"string":var c=t,u={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(i in u)u.hasOwnProperty(i)&&(c=c.replace(new RegExp(i,"g"),u[i]));o+='"'+c+'"';break;case"number":o+=String(t)}return o+=r>1?",":"",1===r&&(o=o.replace(/,([\]}])/g,"$1")),o.replace(/([\[{]),/g,"$1")},e.fn.cmd=function(t){function r(){I.toggleClass("inverted")}function i(){b="(reverse-i-search)`"+C+"': ",P()}function o(){b=w,D=!1,j=null,C=""}function a(e){var n,t,r=x.data(),o=r.length;if(e&&j>0&&(o-=j),C.length>0)for(var a=C.length;a>0;a--){t=C.substring(0,a).replace(/([.*+{}\[\]?])/g,"\\$1"),n=new RegExp(t);for(var s=o;s--;)if(n.test(r[s]))return j=r.length-s,z=0,g.set(r[s],!0),O(),void(C.length!==a&&(C=C.substring(0,a),i()))}C=""}function s(){var e=g.width(),n=I.innerWidth();y=Math.floor(e/n)}function c(e){var n=e.substring(0,y-_),t=e.substring(y-_);return[n].concat(l(t,y))}function u(){F.focus(),g.oneTime(1,function(){g.insert(F.val()),F.blur().val("")})}function m(e){var r,s,l;if("function"==typeof t.keydown&&(r=t.keydown(e),r!==n))return r;if(N){if(38===e.which||80===e.which&&e.ctrlKey||(q=!0),!D||35!==e.which&&36!==e.which&&37!==e.which&&38!==e.which&&39!==e.which&&40!==e.which&&13!==e.which&&27!==e.which){if(e.altKey)return 68===e.which?(g.set(E.slice(0,z)+E.slice(z).replace(/[^ ]+ |[^ ]+$/,""),!0),!1):!0;if(13===e.keyCode)if(e.shiftKey)g.insert("\n");else{x&&E&&!S&&("function"==typeof t.historyFilter&&t.historyFilter(E)||!t.historyFilter)&&x.append(E);var c=E;x.reset(),g.set(""),t.commands&&t.commands(c),"function"==typeof b&&P()}else if(8===e.which)D?(C=C.slice(0,-1),i()):""!==E&&z>0&&(E=E.slice(0,z-1)+E.slice(z,E.length),--z,O());else if(67===e.which&&e.ctrlKey&&e.shiftKey)T=v();else if(86===e.which&&e.ctrlKey&&e.shiftKey)""!==T&&g.insert(T);else if(9!==e.which||e.ctrlKey||e.altKey){if(46===e.which)return""!==E&&z<E.length&&(E=E.slice(0,z)+E.slice(z+1,E.length),O()),!0;if(x&&38===e.which||80===e.which&&e.ctrlKey)q?(K=E,g.set(x.current())):g.set(x.previous()),q=!1;else if(x&&40===e.which||78===e.which&&e.ctrlKey)g.set(x.end()?K:x.next());else if(37===e.which||66===e.which&&e.ctrlKey)if(e.ctrlKey&&66!==e.which){l=z-1,s=0," "===E[l]&&--l;for(var f=l;f>0;--f){if(" "===E[f]&&" "!==E[f+1]){s=f+1;break}if("\n"===E[f]&&"\n"!==E[f+1]){s=f;break}}g.position(s)}else z>0&&(--z,O());else if(82===e.which&&e.ctrlKey)D?a(!0):(w=b,i(),K=E,E="",O(),D=!0);else if(71==e.which&&e.ctrlKey)D&&(b=w,P(),E=K,O(),D=!1,C="");else if(39===e.which||70===e.which&&e.ctrlKey)if(e.ctrlKey&&70!==e.which){" "===E[z]&&++z;var p=/\S[\n\s]{2,}|[\n\s]+\S?/,h=E.slice(z).match(p);!h||h[0].match(/^\s+$/)?z=E.length:" "!==h[0][0]?z+=h.index+1:(z+=h.index+h[0].length-1," "!==h[0][h[0].length-1]&&--z),O()}else z<E.length&&(++z,O());else{if(123===e.which)return!0;if(36===e.which)g.position(0);else if(35===e.which)g.position(E.length);else{if(e.shiftKey&&45==e.which)return u(),!0;if(!e.ctrlKey&&!e.metaKey)return!0;if(192===e.which)return!0;if(e.metaKey){if(82===e.which)return!0;if(76===e.which)return!0}if(e.shiftKey){if(84===e.which)return!0}else{if(81===e.which){if(""!==E&&0!==z){var d=E.slice(0,z),F=E.slice(z+1),y=d.match(/([^ ]+ *$)/);z=d.length-y[0].length,$=d.slice(z),E=d.slice(0,z)+F,O()}return!1}if(72===e.which)return""!==E&&z>0&&(E=E.slice(0,--z),z<E.length-1&&(E+=E.slice(z)),O()),!1;if(65===e.which)g.position(0);else if(69===e.which)g.position(E.length);else{if(88===e.which||67===e.which||84===e.which)return!0;if(89===e.which)""!==$&&g.insert($);else{if(86===e.which)return u(),!0;if(75===e.which)0===z?($=E,g.set("")):z!==E.length&&($=E.slice(z),g.set(E.slice(0,z)));else if(85===e.which)""!==E&&0!==z&&($=E.slice(0,z),g.set(E.slice(z,E.length)),g.position(0));else if(17===e.which)return!1}}}}}}else g.insert("	")}else o(),P(),27===e.which&&(E=""),O(),m.call(this,e);return!1}}var g=this,d=g.data("cmd");if(d)return d;g.addClass("cmd"),g.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var F=e("<textarea/>").addClass("clipboard").appendTo(g);t.width&&g.width(t.width);var y,_,w,b,A,x,k,D=!1,C="",j=null,S=t.mask||!1,E="",T="",$="",z=0,N=t.enabled,R=t.historySize||60,I=g.find(".cursor");k=h()?function(e){e?I.addClass("blink"):I.removeClass("blink")}:function(e){e&&!N?(I.addClass("inverted"),g.everyTime(500,"blink",r)):N&&(g.stopTime("blink",r),I.removeClass("inverted"))};var K,O=function(n){function t(n,t){var r=n.length;if(t===r)a.html(e.terminal.encode(n,!0)),I.html("&nbsp;"),s.html("");else if(0===t)a.html(""),I.html(e.terminal.encode(n.slice(0,1),!0)),s.html(e.terminal.encode(n.slice(1),!0));else{var i=e.terminal.encode(n.slice(0,t),!0);a.html(i);var o=n.slice(t,t+1);I.html(" "===o?"&nbsp;":e.terminal.encode(o,!0)),s.html(t===n.length-1?"":e.terminal.encode(n.slice(t+1),!0))}}function r(n){return"<div>"+e.terminal.encode(n,!0)+"</div>"}function i(n){var t=s;e.each(n,function(n,i){t=e(r(i)).insertAfter(t).addClass("clear")})}function o(n){e.each(n,function(e,n){a.before(r(n))})}var a=I.prev(),s=I.next();return function(){var u,f,p=S?E.replace(/./g,"*"):E;if(n.find("div").remove(),a.html(""),p.length>y-_-1||p.match(/\n/)){var h,m=p.match(/\t/g),g=m?3*m.length:0;if(m&&(p=p.replace(/\t/g,"\x00\x00\x00\x00")),p.match(/\n/)){var d=p.split("\n");for(f=y-_-1,u=0;u<d.length-1;++u)d[u]+=" ";for(d[0].length>f?(h=[d[0].substring(0,f)],h=h.concat(l(d[0].substring(f),y))):h=[d[0]],u=1;u<d.length;++u)d[u].length>y?h=h.concat(l(d[u],y)):h.push(d[u])}else h=c(p);if(m&&(h=e.map(h,function(e){return e.replace(/\x00\x00\x00\x00/g,"	")})),f=h[0].length,0===f&&1===h.length);else if(f>z)t(h[0],z),i(h.slice(1));else if(z===f)a.before(r(h[0])),t(h[1],0),i(h.slice(2));else{var F=h.length;if(f>z)t(h[0],z),i(h.slice(1));else if(z===f)a.before(r(h[0])),t(h[1],0),i(h.slice(2));else{var v=h.slice(-1)[0],w=p.length-z,b=v.length,A=0;if(b>=w)o(h.slice(0,-1)),A=b===w?0:b-w,t(v,A+g);else if(3===F)a.before("<div>"+e.terminal.encode(h[0],!0)+"</div>"),t(h[1],z-f-1),s.after('<div class="clear">'+e.terminal.encode(h[2],!0)+"</div>");else{var x,k;for(A=z,u=0;u<h.length;++u){var D=h[u].length;if(!(A>D))break;A-=D}k=h[u],x=u,A===k.length&&(A=0,k=h[++x]),t(k,A),o(h.slice(0,x)),i(h.slice(x+1))}}}}else""===p?(a.html(""),I.html("&nbsp;"),s.html("")):t(p,z)}}(g),P=function(){function n(n){_=p(n),t.html(e.terminal.format(e.terminal.encode(n)))}var t=g.find(".prompt");return function(){switch(typeof b){case"string":n(b);break;case"function":b(n)}}}(),q=!0;e.extend(g,{name:function(e){if(e!==n){A=e;var t=x&&x.enabled()||!x;return x=new f(e,R),t||x.disable(),g}return A},purge:function(){return x.clear(),g},history:function(){return x},set:function(e,r){return e!==n&&(E=e,r||(z=E.length),O(),"function"==typeof t.onCommandChange&&t.onCommandChange(E)),g},insert:function(e,n){return z===E.length?E+=e:E=0===z?e+E:E.slice(0,z)+e+E.slice(z),n||(z+=e.length),O(),"function"==typeof t.onCommandChange&&t.onCommandChange(E),g},get:function(){return E},commands:function(e){return e?(t.commands=e,g):e},destroy:function(){return e(document.documentElement||window).unbind(".cmd"),g.stopTime("blink",r),g.find(".cursor").next().remove().end().prev().remove().end().remove(),g.find(".prompt, .clipboard").remove(),g.removeClass("cmd").removeData("cmd"),g},prompt:function(e){if(e===n)return b;if("string"!=typeof e&&"function"!=typeof e)throw"prompt must be a function or string";return b=e,P(),O(),g},kill_text:function(){return $},position:function(e){return"number"==typeof e?(z=0>e?0:e>E.length?E.length:e,O(),g):z},visible:function(){var e=g.visible;return function(){e.apply(g,[]),O(),P()}}(),show:function(){var e=g.show;return function(){e.apply(g,[]),O(),P()}}(),resize:function(e){return e?y=e:s(),O(),g},enable:function(){return N=!0,k(!0),g},isenabled:function(){return N},disable:function(){return N=!1,k(!1),g},mask:function(e){return"boolean"==typeof e?(S=e,O(),g):S}}),g.name(t.name||t.prompt||""),b=t.prompt||"> ",P(),(t.enabled===n||t.enabled===!0)&&g.enable();return e(document.documentElement||window).bind("keypress.cmd",function(r){var o;if(r.ctrlKey&&99===r.which)return!0;if(D||"function"!=typeof t.keypress||(o=t.keypress(r)),o!==n&&!o)return o;if(N){if(e.inArray(r.which,[38,13,0,8])>-1&&123!==r.keyCode&&(38!==r.which||!r.shiftKey))return!1;if(!r.ctrlKey&&(!r.altKey||100!==r.which)||r.altKey)return D?(C+=String.fromCharCode(r.which),a(),i()):g.insert(String.fromCharCode(r.which)),!1}}).bind("keydown.cmd",m),g.data("cmd",g),g};var b=["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],A=/(\[\[[gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/i,x=/\[\[([gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,k=/\[\[([gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,D=/^\[\[([gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]$/gi,C=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,j=/\bhttps?:\/\/(?:(?!&[^;]+;)[^\s"'<>)])+\b/g,S=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,E=/('[^']*'|"(\\"|[^"])*"|\/(\\\/|[^\/])+\/[gimy]*|(\\ |[^ ])+|[\w-]+)/g,T=/(\[\[[gbiuso]*;[^;]*;[^\]]*\])/i,$=/\[\[[gbiuso]*;[^;]*;[^\]]*\]?$/i;e.terminal={valid_color:function(n){return n.match(C)||-1!==e.inArray(n.toLowerCase(),b)},escape_regex:function(e){var n=/([\^\$\[\]\(\)\+\*\.\|])/g;return e.replace(n,"\\$1")},have_formatting:function(e){return e.match(k)},is_formatting:function(e){return e.match(D)},format_split:function(e){return e.split(A)},split_equal:function(e,n){for(var t=!1,r=!1,i="",o=[],a=e.replace(k,function(e,n,t){var r=n.match(/;/g).length;return r=2==r?";;":3==r?";":"","[["+n+r+t.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n")+"]"+t+"]"}).split(/\n/g),s=0,l=a.length;l>s;++s)if(""!==a[s])for(var c=a[s],u=0,f=0,p=0,h=c.length;h>p;++p){if("["===c[p]&&"["===c[p+1])t=!0;else if(t&&"]"===c[p])r?(t=!1,r=!1):r=!0;else if(t&&r||!t){if("&"===c[p]){var m=c.substring(p).match(/^(&[^;]+;)/);if(!m)throw"Unclosed html entity in line "+(s+1)+" at char "+(p+1);p+=m[1].length-2,p===h-1&&o.push(g+m[1]);continue}"]"===c[p]&&"\\"===c[p-1]?--f:++f}if(f===n||p===h-1){var g=c.substring(u,p+1);i&&(g=i+g,g.match("]")&&(i="")),u=p+1,f=0;var d=g.match(k);if(d){var F=d[d.length-1];if("]"!==F[F.length-1])i=F.match(T)[1],g+="]";else if(g.match($)){{var y=g.length;y-F[F.length-1].length}g=g.replace($,""),i=F.match(T)[1]}}o.push(g)}}else o.push("");return o},encode:function(e,n){return e=n?e.replace(/&(?![^=]+=)/g,"&amp;"):e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;|[^= "]+=[^=])/g,"&amp;"),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},format:function(n,t){var r=e.extend({},{linksNoReferrer:!1},t||{});if("string"==typeof n){var i=e.terminal.format_split(n);return i&&i.length>1&&(n=e.map(i,function(n){return""===n?n:"["===n.substring(0,1)?n.replace(x,function(n,t,r,i,o,a,s){if(""===s)return"";s=s.replace(/\\]/g,"]");var l="";-1!==t.indexOf("b")&&(l+="font-weight:bold;");var c=[];-1!==t.indexOf("u")&&c.push("underline"),-1!==t.indexOf("s")&&c.push("line-through"),-1!==t.indexOf("o")&&c.push("overline"),c.length&&(l+="text-decoration:"+c.join(" ")+";"),-1!==t.indexOf("i")&&(l+="font-style:italic;"),e.terminal.valid_color(r)&&(l+="color:"+r+";",-1!==t.indexOf("g")&&(l+="text-shadow:0 0 5px "+r+";")),e.terminal.valid_color(i)&&(l+="background-color:"+i);var u;u=""===a?s:a.replace(/&#93;/g,"]");var f='<span style="'+l+'"'+(""!==o?' class="'+o+'"':"")+' data-text="'+u.replace('"',"&quote;")+'">'+s+"</span>";return f}):"<span>"+n+"</span>"}).join("")),e.map(n.split(/(<\/?span[^>]*>)/g),function(e){return e.match(/span/)?e:e.replace(j,function(e){var n=e.match(/\.$/);return e=e.replace(/\.$/,""),'<a target="_blank" '+(r.linksNoReferer?' rel="noreferrer" ':"")+'href="'+e+'">'+e+"</a>"+(n?".":"")}).replace(S,'<a href="mailto:$1">$1</a>')}).join("").replace(/<span><br\/?><\/span>/g,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(x,"$6")},active:function(){return B.front()},overtyping:function(e){return e.replace(/((?:_\x08.|.\x08_)+)/g,function(e){return"[[u;;]"+e.replace(/_x08|\x08_|_\u0008|\u0008_/g,"")+"]"}).replace(/((?:.\x08.)+)/g,function(e){return"[[b;#fff;]"+e.replace(/(.)(?:\x08|\u0008)(.)/g,function(e,n,t){return t})+"]"})},ansi_colors:{normal:{black:"#000",red:"#A00",green:"#008400",yellow:"#A50",blue:"#00A",magenta:"#A0A",cyan:"#0AA",white:"#AAA"},faited:{black:"#000",red:"#640000",green:"#006100",yellow:"#737300",blue:"#000087",magenta:"#650065",cyan:"#008787",white:"#818181"},bold:{black:"#000",red:"#F55",green:"#44D544",yellow:"#FF5",blue:"#55F",magenta:"#F5F",cyan:"#5FF",white:"#FFF"},palette:["#000000","#AA0000","#00AA00","#AA5500","#0000AA","#AA00AA","#00AAAA","#AAAAAA","#555555","#FF5555","#55FF55","#FFFF55","#5555FF","#FF55FF","#55FFFF","#FFFFFF","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]},from_ansi:function(){function n(n){var i,o=n.split(";"),a=!1,s=!1,l=!1,c=[],u="",f="",p=!1,h=!1,m=!1,g=e.terminal.ansi_colors.palette;for(var d in o){switch(i=parseInt(o[d],10)){case 1:c.push("b"),l=!0,a=!1;break;case 4:c.push("u");break;case 3:c.push("i");break;case 5:m=!0;break;case 38:p=!0;break;case 48:h=!0;break;case 2:a=!0,l=!1;break;case 7:s=!0;break;default:p&&m&&g[i-1]?u=g[i-1]:t[i]&&(u=t[i]),h&&m&&g[i-1]?f=g[i-1]:r[i]&&(f=r[i])}5!==i&&(m=!1)}if(s)if(u&&f){var F=f;f=u,u=F}else u="black",f="white";var y,v;return y=v=l?e.terminal.ansi_colors.bold:a?e.terminal.ansi_colors.faited:e.terminal.ansi_colors.normal,[c.join(""),p?u:y[u],h?f:v[f]]}var t={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"white"},r={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"black"};return function(e){var t=e.split(/(\x1B\[[0-9;]*[A-Za-z])/g);if(1==t.length)return e;var r=[];t.length>3&&"[0m"==t.slice(0,3).join("")&&(t=t.slice(3));for(var i,o,a,s,l=!1,c=0;c<t.length;++c)if(s=t[c].match(/^\x1B\[([0-9;]*)([A-Za-z])$/))switch(s[2]){case"m":if(""===s[1])continue;"0"!==s[1]&&(a=n(s[1])),l?(r.push("]"),"0"==s[1]?(l=!1,i=o=""):(a[1]=a[1]||i,a[2]=a[2]||o,r.push("[["+a.join(";")+"]"),a[1]&&(i=a[1]),a[2]&&(o=a[2]))):"0"!=s[1]&&(l=!0,r.push("[["+a.join(";")+"]"),a[1]&&(i=a[1]),a[2]&&(o=a[2]))}else r.push(t[c]);return l&&r.push("]"),r.join("")}}(),parseArguments:function(n){return e.map(n.match(E)||[],function(e){if("'"===e[0]&&"'"===e[e.length-1])return e.replace(/^'|'$/g,"");if('"'===e[0]&&'"'===e[e.length-1])return e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"),e.replace(/\\\\|\\t|\\n/g,function(e){return"t"===e[1]?"	":"n"===e[1]?"\n":"\\"}).replace(/\\x([0-9a-f]+)/gi,function(e,n){return String.fromCharCode(parseInt(n,16))}).replace(/\\0([0-7]+)/g,function(e,n){return String.fromCharCode(parseInt(n,8))});if(e.match(/^\/(\\\/|[^\/])+\/[gimy]*$/)){var n=e.match(/^\/([^\/]+)\/([^\/]*)$/);return new RegExp(n[1],n[2])}return e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/)?parseFloat(e):e.replace(/\\ /g," ")})},splitArguments:function(n){return e.map(n.match(E)||[],function(e){return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):"/"===e[0]&&"/"==e[e.length-1]?e:e.replace(/\\ /g," ")})},parseCommand:function(n){return m(n,e.terminal.parseArguments)},splitCommand:function(n){return m(n,e.terminal.splitArguments)},test:function(){function n(e,n){t.echo(n+" &#91;"+(e?"[[b;#44D544;]PASS]":"[[b;#FF5555;]FAIL]")+"&#93;")}var t=e.terminal.active();if(!t){t=e("body").terminal(e.noop).css("margin",0);var r=(t.outerHeight()-t.height(),e(window));r.resize(function(){t.css("height",e(window).height()-20)}).resize()}t.echo("Testing...");var i='name "foo bar" baz /^asd [x]/ str\\ str 10 1e10',o=e.terminal.splitCommand(i);n("name"===o.name&&"foo bar"===o.args[0]&&"baz"===o.args[1]&&"/^asd [x]/"===o.args[2]&&"str str"===o.args[3]&&"10"===o.args[4]&&"1e10"===o.args[5],"$.terminal.splitCommand"),o=e.terminal.parseCommand(i),n("name"===o.name&&"foo bar"===o.args[0]&&"baz"===o.args[1]&&"regexp"===e.type(o.args[2])&&"^asd [x]"===o.args[2].source&&"str str"===o.args[3]&&10===o.args[4]&&1e10===o.args[5],"$.terminal.parseCommand"),i="[2;31;46mFoo[1;3;4;32;45mBar[0m[7mBaz",n("[[;#640000;#008787]Foo][[biu;#44D544;#F5F]Bar][[;#000;#AAA]Baz]"===e.terminal.from_ansi(i),"$.terminal.from_ansi"),i="[[biugs;#fff;#000]Foo][[i;;;foo]Bar][[ous;;]Baz]",t.echo("$.terminal.format"),n('<span style="font-weight:bold;text-decoration:underline line-through;font-style:italic;color:#fff;text-shadow:0 0 5px #fff;background-color:#000" data-text="Foo">Foo</span><span style="font-style:italic;" class="foo" data-text="Bar">Bar</span><span style="text-decoration:underline line-through overline;" data-text="Baz">Baz</span>'===e.terminal.format(i),"	formatting"),i="http://terminal.jcubic.pl/examples.php https://www.google.com/?q=jquery%20terminal",n('<a target="_blank" href="http://terminal.jcubic.pl/examples.php">http://terminal.jcubic.pl/examples.php</a> <a target="_blank" href="https://www.google.com/?q=jquery%20terminal">https://www.google.com/?q=jquery%20terminal</a>'===e.terminal.format(i),"	urls"),i="foo@bar.com baz.quux@example.com",n('<a href="mailto:foo@bar.com">foo@bar.com</a> <a href="mailto:baz.quux@example.com">baz.quux@example.com</a>'===e.terminal.format(i),"	emails"),i="-_-[[biugs;#fff;#000]Foo]-_-[[i;;;foo]Bar]-_-[[ous;;]Baz]-_-",n("-_-Foo-_-Bar-_-Baz-_-"===e.terminal.strip(i),"$.terminal.strip"),i="[[bui;#fff;]Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed dolor nisl, in suscipit justo. Donec a enim et est porttitor semper at vitae augue. Proin at nulla at dui mattis mattis. Nam a volutpat ante. Aliquam consequat dui eu sem convallis ullamcorper. Nulla suscipit, massa vitae suscipit ornare, tellus] est [[b;;#f00]consequat nunc, quis blandit elit odio eu arcu. Nam a urna nec nisl varius sodales. Mauris iaculis tincidunt orci id commodo. Aliquam] non magna quis [[i;;]tortor malesuada aliquam] eget ut lacus. Nam ut vestibulum est. Praesent volutpat tellus in eros dapibus elementum. Nam laoreet risus non nulla mollis ac luctus [[ub;#fff;]felis dapibus. Pellentesque mattis elementum augue non sollicitudin. Nullam lobortis fermentum elit ac mollis. Nam ac varius risus. Cras faucibus euismod nulla, ac auctor diam rutrum sit amet. Nulla vel odio erat], ac mattis enim.",t.echo("$.terminal.split_equal");
for(var a=[10,40,60,400],s=a.length;s--;){for(var l=e.terminal.split_equal(i,a[s]),c=!0,u=0;u<l.length;++u)if(e.terminal.strip(l[u]).length>a[s]){c=!1;break}n(c,"	split "+a[s])}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var z={};e.jrpc=function(n,t,r,i,o){z[n]=z[n]||0;var a=e.json_stringify({jsonrpc:"2.0",method:t,params:r,id:++z[n]});return e.ajax({url:n,data:a,success:function(n,t,r){var a=r.getResponseHeader("Content-Type");if(!a.match(/application\/json/)){if(!console||!console.warn)throw new Error("WARN: Response Content-Type is not application/json");console.warn("Response Content-Type is not application/json")}var s;try{s=e.parseJSON(n)}catch(l){if(!o)throw new Error("Invalid JSON");return void o(r,"Invalid JSON",l)}i(s,t,r)},error:o,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var N="0.8.8",R=!N.match(/^\{\{/),I="Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>",K=R?" version "+N:" ",O=new RegExp(" {"+K.length+"}$"),P=[["jQuery Terminal","(c) 2011-2013 jcubic"],["jQuery Terminal Emulator"+(R?" v. "+N:""),I.replace(/ *<.*>/,"")],["jQuery Terminal Emulator"+(R?K:""),I.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(O," ")+K,I],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(O,"")+K,I]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,checkArity:!0,exceptionHandler:null,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,login:null,outputLimit:-1,onAjaxError:null,onRPCError:null,completion:!1,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop,strings:{wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expect %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with ignoreSystemDescribe",oneInterpreterFunction:"You can't use more then one function (rpc with ignoreSystemDescribe is count as one)",loginFunctionMissing:"You don't have login function",noTokenError:"Access denied (no token)",serverResponse:"Server reponse is",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call that function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpeter",invalidCompletion:"Invalid completion",login:"login",password:"password"}};var q=[],B=new c;e.fn.terminal=function(t,r){function i(n){return"function"==typeof rn.processArguments?m(n,rn.processArguments):rn.processArguments?e.terminal.parseCommand(n):e.terminal.splitCommand(n)}function o(n){Q.echo("string"==typeof n?n:n instanceof Array?e.map(n,function(n){return e.json_stringify(n)}).join(" "):"object"==typeof n?e.json_stringify(n):n)}function a(e){"function"==typeof rn.onRPCError?rn.onRPCError.call(Q,e):Q.error("&#91;RPC&#93; "+e.message)}function s(n){var t=function(t,r){Q.pause(),e.jrpc(n,t,r,function(e){e.error?a(e.error):"function"==typeof rn.processRPCResponse?rn.processRPCResponse.call(Q,e.result):o(e.result),Q.resume()},c)};return function(e,n){if(""!==e)if(e=i(e),rn.login&&"help"!==e.name){var r=n.token();r?t(e.name,[r].concat(e.args)):n.error("&#91;AUTH&#93; "+on.noTokenError)}else t(e.name,e.args)}}function l(t,r,o){return function(a,s){if(""!==a){var c=i(a),u=t[c.name],f=e.type(u);if("function"===f){if(!r||u.length===c.args.length)return u.apply(Q,c.args);Q.error("&#91;Arity&#93; "+sprintf(on.wrongArity,c.name,u.length,c.args.length))}else if("object"===f||"string"===f){var p=[];"object"===f&&(p=Object.keys(u),u=l(u,r)),s.push(u,{prompt:c.name+"> ",name:c.name,completion:"object"===f?function(e,n,t){t(p)}:n})}else"function"===e.type(o)?o(a,Q):"function"===e.type(rn.onCommandNotFound)?rn.onCommandNotFound(a,Q):s.error(sprintf(on.commandNotFound,c.name))}}}function c(e,n,t){Q.resume(),"function"==typeof rn.onAjaxError?rn.onAjaxError.call(Q,e,n,t):"abort"!==n&&Q.error("&#91;AJAX&#93; "+n+" - "+on.serverResponse+": \n"+e.responseText)}function f(n,t,r){e.jrpc(n,"system.describe",[],function(i){if(i.procs){var s={};e.each(i.procs,function(r,i){s[i.name]=function(){var r=t&&"help"!=i.name,s=Array.prototype.slice.call(arguments),l=s.length+(r?1:0);rn.checkArity&&i.params&&i.params.length!==l?Q.error("&#91;Arity&#93; "+sprintf(on.wrongArity,i.name,i.params.length,l)):(Q.pause(),r&&(s=[Q.token(!0)].concat(s)),e.jrpc(n,i.name,s,function(e){e.error?a(e.error):o(e.result),Q.resume()},c))}}),r(s)}else r(null)},function(){r(null)})}function p(n,t,r){r=r||e.noop;var i,o,a=e.type(n),c={},u=0;if("array"===a){var p={};!function h(n,r){if(n.length){var i=n[0],a=n.slice(1),l=e.type(i);"string"===l?(u++,Q.pause(),rn.ignoreSystemDescribe?(1===u?o=s(i):Q.error(on.oneRPCWithIgnore),h(a,r)):f(i,t,function(n){n&&e.extend(p,n),Q.resume(),h(a,r)})):"function"===l?o?Q.error(on.oneInterpreterFunction):o=i:"object"===l&&(e.extend(p,i),h(a,r))}else r()}(n,function(){i=Object.keys(p),c.interpreter=l(p,!1,o),c.completion=function(e,n,t){t(i)},r(c)})}else if("string"===a)rn.ignoreSystemDescribe?r({interpreter:s(n),completion:rn.completion}):(Q.pause(),f(n,t,function(e){if(e){var t=Object.keys(e);c.interpreter=l(e,!1),c.completion=function(e,n,r){r(t)}}else c.interpreter=s(n),c.completion=rn.completion;Q.resume(),r(c)}));else if("object"===a)i=Object.keys(n),c.interpreter=l(n,rn.checkArity),c.completion=function(e,n,t){t(i)},r(c);else{if("undefined"===a)n=e.noop;else if("function"!==a)throw a+" is invalid interpreter value";r({interpreter:n,completion:rn.completion})}}function h(n,t){var r="boolean"===e.type(t)?"login":t;return function(t,i,o){Q.pause(),e.jrpc(n,r,[t,i],function(e){Q.resume(),o(!e.error&&e.result?e.result:null)},c)}}function d(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function w(e,n){"function"==typeof rn.exceptionHandler?rn.exceptionHandler.call(Q,e):Q.exception(e,n)}function b(){var e=W.prop?W.prop("scrollHeight"):W.attr("scrollHeight");W.scrollTop(e)}function A(e,n){try{if("function"==typeof n)n(function(){});else if("string"!=typeof n){var t=e+" must be string or function";throw t}}catch(r){return w(r,e.toUpperCase()),!1}return!0}function x(n,t){try{var r=e.extend({raw:!1,finalize:e.noop},t||{});n="function"===e.type(n)?n():n,n="string"===e.type(n)?n:String(n);var i,o;if(r.raw||(n=e.terminal.encode(n)),n=e.terminal.overtyping(n),n=e.terminal.from_ansi(n),O.push(L),!r.raw&&(n.length>M||n.match(/\n/))){var a=e.terminal.split_equal(n,M);for(i=0,o=a.length;o>i;++i)O.push(""===a[i]||"\r"===a[i]?"&nbsp;":r.raw?a[i]:e.terminal.format(a[i],{linksNoReferer:rn.linksNoReferer}))}else r.raw||(n=e.terminal.format(n,{linksNoReferer:rn.linksNoReferer})),O.push(n);O.push(r.finalize)}catch(s){O=[],alert("[Internal Exception(draw_line)]:"+d(s)+"\n"+s.stack)}}function k(){pn.resize(M);var n,t=J.empty().detach();if(rn.outputLimit>=0){var r=0===rn.outputLimit?Q.rows():rn.outputLimit;n=X.slice(X.length-r-1)}else n=X;e.each(n,function(e,n){x.apply(null,n)}),pn.before(t),Q.flush()}function D(){if(rn.greetings===n)Q.echo(Q.signature);else if(rn.greetings){var e=typeof rn.greetings;"string"===e?Q.echo(rn.greetings):"function"===e?rn.greetings.call(Q,Q.echo):Q.error(on.wrongGreetings)}}function C(n){n=e.terminal.escape_brackets(e.terminal.encode(n,!0));var t=pn.prompt();pn.mask()&&(n=n.replace(/./g,"*")),"function"==typeof t?t(function(e){Q.echo(e+n)}):Q.echo(t+n)}function j(t,r,i){try{I()||(H=e.terminal.splitCommand(t).name,(i&&"function"==typeof rn.historyFilter&&rn.historyFilter(t)||!rn.historyFilter)&&pn.history().append(t));var o=fn.top();if("exit"===t&&rn.exit){var a=fn.size();Q.token(),(1==a&&Q.token()||a>1)&&(r||C(t),Q.pop())}else{r||C(t);var s=X.length-1;if("clear"===t&&rn.clear)Q.clear();else{var l=o.interpreter(t,Q);l!==n&&(s===X.length-1?(X.pop(),l!==!1&&Q.echo(l)):X=l===!1?X.slice(0,s).concat(X.slice(s+1)):X.slice(0,s).concat([l]).concat(X.slice(s+1)),Q.resize())}}}catch(c){throw w(c,"USER"),Q.resume(),c}}function S(){if("function"==typeof rn.onBeforeLogout)try{if(rn.onBeforeLogout(Q)===!1)return}catch(e){throw w(e,"onBeforeLogout"),e}if(E(),"function"==typeof rn.onAfterLogout)try{rn.onAfterLogout(Q)}catch(e){throw w(e,"onAfterlogout"),e}Q.login(rn.login,!0,z)}function E(){var n=Q.prefix_name(!0)+"_";e.Storage.remove(n+"token"),e.Storage.remove(n+"login")}function T(n){var t=Q.prefix_name()+"_interpreters",r=e.Storage.get(t);r=r?e.parseJSON(r):[],-1==e.inArray(n,r)&&(r.push(n),e.Storage.set(t,e.json_stringify(r)))}function $(e){var n=fn.top(),t=Q.prefix_name(!0);I()||T(t),pn.name(t),pn.prompt("function"==typeof n.prompt?function(e){n.prompt(e,Q)}:n.prompt),pn.set(""),e||"function"!=typeof n.onStart||n.onStart(Q)}function z(){$(),D();var n=!1;if("function"==typeof rn.onInit){nn=function(){n=!0};try{rn.onInit(Q)}catch(t){throw w(t,"OnInit"),t}finally{nn=e.noop,n||Q.resume()}}}function R(n,t,r){var i=pn.get().substring(0,pn.position());if(i===n){for(var o=new RegExp("^"+e.terminal.escape_regex(t)),a=[],s=r.length;s--;)o.test(r[s])&&a.push(r[s]);if(1===a.length)Q.insert(a[0].replace(o,"")+" ");else if(a.length>1)if(G>=2)C(n),Q.echo(a.join("	")),G=0;else{var l,c=!1;e:for(l=t.length;l<a[0].length;++l){for(s=1;s<a.length;++s)if(a[0].charAt(l)!==a[s].charAt(l))break e;c=!0}c&&Q.insert(a[0].slice(0,l).replace(o,""))}}}function I(){return en||pn.mask()}function K(t){var r,i,o=fn.top();if("function"===e.type(o.keydown)&&(r=o.keydown(t,Q),r!==n))return r;var a;if(a=rn.completion&&"boolean"!=e.type(rn.completion)&&!o.completion?rn.completion:o.completion,Q.oneTime(10,function(){ln()}),"function"===e.type(rn.keydown)&&(r=rn.keydown(t,Q),r!==n))return r;if(Q.paused()){if(68===t.which&&t.ctrlKey){if(q.length){for(i=q.length;i--;){var s=q[i];if(4!==s.readyState)try{s.abort()}catch(l){Q.error(f.ajaxAbortError)}}q=[],Q.resume()}return!1}}else{if(9!==t.which&&(G=0),68===t.which&&t.ctrlKey)return en||(""===pn.get()?fn.size()>1||rn.login!==n?Q.pop(""):(Q.resume(),Q.echo("")):Q.set_command("")),!1;if(76===t.which&&t.ctrlKey)Q.clear();else{if(a&&9===t.which){++G;var c,u=pn.get().substring(0,pn.position()),f=u.split(" ");if(1==f.length)c=f[0];else for(c=f[f.length-1],i=f.length-1;i>0&&"\\"==f[i-1][f[i-1].length-1];i--)c=f[i-1]+" "+c;switch(e.type(a)){case"function":a(Q,c,function(e){R(u,c,e)});break;case"array":R(u,c,a);break;default:throw new Error(e.terminal.defaults.strings.invalidCompletion)}return!1}if(86===t.which&&t.ctrlKey)return void Q.oneTime(1,function(){b()});if(9===t.which&&t.ctrlKey){if(B.length()>1)return Q.focus(!1),!1}else 34===t.which?Q.scroll(Q.height()):33===t.which?Q.scroll(-Q.height()):Q.attr({scrollTop:Q.attr("scrollHeight")})}}}var O=[],L=1,Q=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),t,e.extend({name:Q.selector},r))});if(Q.data("terminal"))return Q.data("terminal");if(0===Q.length)throw'Sorry, but terminal said that "'+Q.selector+'" is not valid selector!';var W,H,J,M,U,Y,Z,G=0,X=[],V=B.length(),en=!1,nn=e.noop,tn=[],rn=e.extend({},e.terminal.defaults,{name:Q.selector},r||{}),on=e.terminal.defaults.strings,an=rn.enabled,sn=!1;e.extend(Q,e.omap({clear:function(){J.html(""),pn.set(""),X=[];try{rn.onClear(Q)}catch(e){throw w(e,"onClear"),e}return Q.attr({scrollTop:0}),Q},export_view:function(){if(en)throw new Exception(on.notWhileLogin);return{prompt:Q.get_prompt(),command:Q.get_command(),position:pn.position(),lines:X.slice(0)}},import_view:function(e){if(en)throw new Exception(on.notWhileLogin);return Q.set_prompt(e.prompt),Q.set_command(e.command),pn.position(e.position),X=e.lines,k(),Q},exec:function(e,n){return sn?tn.push([e,n]):j(e,n,!0),Q},login:function(n,t,r,i){if(en)throw new Error(on.notWhileLogin);if("function"!=typeof n)throw new Error(on.loginIsNotAFunction);if(Q.token(!0)&&Q.login_name(!0))return"function"==typeof r&&r(),Q;return rn.history&&pn.history().disable(),en=!0,Q.push(function(o){Q.set_mask(!0).push(function(a){try{n.call(Q,o,a,function(n,a){if(n){Q.pop().pop(),rn.history&&pn.history().enable();var s=Q.prefix_name(!0)+"_";e.Storage.set(s+"token",n),e.Storage.set(s+"login",o),en=!1,"function"==typeof r&&r()}else t?(a||Q.error(on.wrongPasswordTryAgain),Q.pop().set_mask(!1)):(en=!1,a||Q.error(on.wrongPassword),Q.pop().pop()),"function"==typeof i&&i()})}catch(s){w(s,"USER(authentication)")}},{prompt:on.password+": "})},{prompt:on.login+": "})},settings:rn,commands:function(){return fn.top().interpreter},setInterpreter:function(n,t){function r(){Q.pause(),p(n,t,function(n){Q.resume();var t=fn.top();e.extend(t,n),$(!0)})}"string"==e.type(n)&&t?Q.login(h(n,t),!0,r):r()},greetings:function(){return D(),Q},paused:function(){return sn},pause:function(){return nn(),!sn&&pn&&(sn=!0,Q.disable(),pn.hidden()),Q},resume:function(){if(sn&&pn){sn=!1,Q.enable(),pn.visible();var e=tn;for(tn=[];e.length;)Q.exec.apply(Q,e.shift());b()}return Q},cols:function(){return M},rows:function(){return U},history:function(){return pn.history()},next:function(){if(1===B.length())return Q;{var n=Q.offset().top;Q.height(),Q.scrollTop()}if(g(Q)){B.front().disable();var t=B.rotate().enable(),r=t.offset().top-50;e("html,body").animate({scrollTop:r},500);try{rn.onTerminalChange(t)}catch(i){throw w(i,"onTerminalChange"),i}return t}return Q.enable(),e("html,body").animate({scrollTop:n-50},500),Q},focus:function(e,n){return Q.oneTime(1,function(){if(1===B.length())if(e===!1)try{n||rn.onBlur(Q)===!1||Q.disable()}catch(t){throw w(t,"onBlur"),t}else try{n||rn.onFocus(Q)===!1||Q.enable()}catch(t){throw w(t,"onFocus"),t}else if(e===!1)Q.next();else{var r=B.front();if(r!=Q&&(r.disable(),!n))try{rn.onTerminalChange(Q)}catch(t){throw w(t,"onTerminalChange"),t}B.set(Q),Q.enable()}}),Q},enable:function(){return M===n&&Q.resize(),pn&&(pn.enable(),an=!0),Q},disable:function(){return pn&&(an=!1,pn.disable()),Q},enabled:function(){return an},signature:function(){var e=Q.cols(),n=15>e?null:35>e?0:55>e?1:64>e?2:75>e?3:4;return null!==n?P[n].join("\n")+"\n":""},version:function(){return N},cmd:function(){return pn},get_command:function(){return pn.get()},set_command:function(e){return pn.set(e),Q},insert:function(e){if("string"==typeof e)return pn.insert(e),Q;throw"insert function argument is not a string"},set_prompt:function(e){return A("prompt",e)&&(pn.prompt("function"==typeof e?function(n){e(n,Q)}:e),fn.top().prompt=e),Q},get_prompt:function(){return fn.top().prompt},set_mask:function(e){return pn.mask(e),Q},get_output:function(n){return n?X:e.map(X,function(e){return"function"==typeof e[0]?e[0]():e[0]}).join("\n")},resize:function(e,n){e&&n&&(Q.width(e),Q.height(n)),e=Q.width(),n=Q.height();var t=F(Q),r=y(Q);return(t!==M||r!==U)&&(M=t,U=r,k(),"function"!=typeof rn.onResize||Z===n&&Y===e||rn.onResize(Q),(Z!==n||Y!==e)&&(Z=n,Y=e)),Q},flush:function(){try{var n;if(e.each(O,function(t,r){if(r===L)n=e("<div></div>");else if("function"==typeof r){n.appendTo(J);try{r(n)}catch(i){w(i,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(n).width("100%")}),rn.outputLimit>=0){var t=0===rn.outputLimit?Q.rows():rn.outputLimit,r=J.find("div div");if(r.length>t){var i=r.slice(0,X.length-t+1),o=i.parent();i.remove(),o.each(function(){var n=e(this);n.is(":empty")&&n.remove()})}}b(),O=[]}catch(a){alert("[Flush] "+d(a)+"\n"+a.stack)}return Q},echo:function(n,t){try{n=n||"";var r=e.extend({flush:!0,raw:!1,finalize:e.noop},t||{});O=[],x(n,r),X.push([n,r]),r.flush&&Q.flush(),ln()}catch(i){alert("[Terminal.echo] "+d(i)+"\n"+i.stack)}return Q},error:function(n,t){return Q.echo("[[;#f00;]"+e.terminal.escape_brackets(n).replace(/\\$/,"&#92;")+"]\n",t)},exception:function(n,t){var r=d(n);t&&(r="&#91;"+t+"&#93;: "+r),r&&Q.error(r,{finalize:function(e){e.addClass("exception message")}}),"string"==typeof n.fileName&&(Q.pause(),e.get(n.fileName,function(e){Q.resume();var t=n.lineNumber-1,r=e.split("\n")[t];r&&Q.error("&#91;"+n.lineNumber+"&#93;: "+r)})),n.stack&&Q.error(n.stack,{finalize:function(e){e.addClass("exception stack-trace")}})},scroll:function(e){var n;return e=Math.round(e),W.prop?(e>W.prop("scrollTop")&&e>0&&W.prop("scrollTop",0),n=W.prop("scrollTop"),W.scrollTop(n+e)):(e>W.attr("scrollTop")&&e>0&&W.attr("scrollTop",0),n=W.attr("scrollTop"),W.scrollTop(n+e)),Q},logout:rn.login?function(){for(;fn.size()>1;)Q.pop();return Q.pop()}:function(){Q.error(on.loginFunctionMissing)},token:rn.login?function(n){return e.Storage.get(Q.prefix_name(n)+"_token")}:e.noop,login_name:rn.login?function(n){return e.Storage.get(Q.prefix_name(n)+"_login")}:e.noop,name:function(){return fn.top().name},prefix_name:function(e){var n=(rn.name?rn.name+"_":"")+V;return e&&fn.size()>1&&(n+="_"+fn.map(function(e){return e.name}).slice(1).join("_")),n},push:function(n,t){t=t||{},t.name=t.name||H,t.prompt=t.prompt||t.name+" ";var r=fn.top();return r&&(r.mask=pn.mask()),p(n,t.login,function(r){if(fn.push(e.extend({},r,t)),t.login){var i=e.type(t.login);"function"==i?Q.login(t.login,!1,$,Q.pop):("string"==e.type(n)&&"string"==i||"boolean"==i)&&Q.login(h(n,t.login),!1,$,Q.pop)}else $()}),Q},pop:function(t){t!==n&&C(t);var r=Q.token(!0);if(1==fn.size())if(rn.login){if(S(),"function"===e.type(rn.onExit))try{rn.onExit(Q)}catch(i){throw w(i,"onExit"),i}}else Q.error(on.canExitError);else{r&&E();var o=fn.pop();if($(),"function"===e.type(o.onExit))try{o.onExit(Q)}catch(i){throw w(i,"onExit"),i}Q.set_mask(fn.top().mask)}return Q},level:function(){return fn.size()},reset:function(){for(Q.clear();fn.size()>1;)fn.pop();return z(),Q},purge:function(){var n=Q.prefix_name()+"_",t=e.Storage.get(n+"interpreters");return e.each(e.parseJSON(t),function(n,t){e.Storage.remove(t+"_commands"),e.Storage.remove(t+"_token"),e.Storage.remove(t+"_login")}),pn.purge(),e.Storage.remove(n+"interpreters"),Q},destroy:function(){return pn.destroy().remove(),J.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),Q.unbind("click, mousewheel"),Q.removeData("terminal").removeClass("terminal"),rn.width&&Q.css("width",""),rn.height&&Q.css("height",""),Q}},function(e,n){return function(){try{return n.apply(this,Array.prototype.slice.apply(arguments))}catch(t){throw"exec"!==e&&"resume"!==e&&w(t,"TERMINAL"),t}}}));var ln=function(){var e=_(Q);return function(){e!==_(Q)&&(Q.resize(),e=_(Q))}}();if(rn.width&&Q.width(rn.width),rn.height&&Q.height(rn.height),W=navigator.userAgent.toLowerCase().match(/(webkit)[ \/]([\w.]+)/)||"body"!=Q[0].tagName.toLowerCase()?Q:e("html"),e(document).bind("ajaxSend.terminal",function(e,n){q.push(n)}),J=e("<div>").addClass("terminal-output").appendTo(Q),Q.addClass("terminal"),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(Q.click(function(){Q.find("textarea").focus()}),Q.find("textarea").focus()),rn.login&&"function"==typeof rn.onBeforeLogin)try{rn.onBeforeLogin(Q)}catch(cn){throw w(cn,"onBeforeLogin"),cn}var un=rn.login;"string"!=typeof t||"string"!=typeof rn.login&&!rn.login||(rn.login=h(t,rn.login)),B.append(Q);var fn,pn;return p(t,un,function(t){if(fn=new u(e.extend({name:rn.name,prompt:rn.prompt,greetings:rn.greetings},t)),pn=e("<div/>").appendTo(Q).cmd({prompt:rn.prompt,history:rn.history,historyFilter:rn.historyFilter,historySize:rn.historySize,width:"100%",keydown:K,keypress:rn.keypress?function(e){return rn.keypress(e,Q)}:null,onCommandChange:function(n){if("function"===e.type(rn.onCommandChange))try{rn.onCommandChange(n,Q)}catch(t){throw w(t,"onCommandChange"),t}b()},commands:j}),an?Q.focus(n,!0):Q.disable(),e(document).bind("click.terminal",function(n){e(n.target).closest(".terminal").hasClass("terminal")||rn.onBlur(Q)===!1||Q.disable()}),Q.click(function(){Q.enabled()||Q.focus()}).mousedown(function(e){2==e.which&&Q.insert(v())}),rn.login?Q.login(rn.login,!0,z):z(),Q.is(":visible")&&(M=F(Q),pn.resize(M),U=y(Q)),Q.oneTime(100,function(){e(window).bind("resize.terminal",function(){if(Q.is(":visible")){var e=Q.width(),n=Q.height();(Z!==n||Y!==e)&&Q.resize()}})}),e.event.special.mousewheel){var r=!1;e(document).bind("keydown.terminal",function(e){e.shiftKey&&(r=!0)}).bind("keyup.terminal",function(e){(e.shiftKey||16==e.which)&&(r=!1)}),Q.mousewheel(function(e,n){r||Q.scroll(n>0?-40:40)})}}),Q.data("terminal",Q),Q}}(jQuery);