"use strict";!function(e){function t(e,t,s){var l=0,p=[0],g="",b=null,g=s||"UTF8";if("UTF8"!==g&&"UTF16BE"!==g&&"UTF16LE"!==g)throw"encoding must be UTF8, UTF16BE, or UTF16LE";if("HEX"===t){if(0!==e.length%2)throw"srcString of HEX type must be in byte increments";b=r(e),l=b.binLen,p=b.value}else if("TEXT"===t||"ASCII"===t)b=n(e,g),l=b.binLen,p=b.value;else if("B64"===t)b=i(e),l=b.binLen,p=b.value;else{if("BYTES"!==t)throw"inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";b=o(e),l=b.binLen,p=b.value}this.getHash=function(e,t,n,r){var o,i=null,s=p.slice(),g=l;if(3===arguments.length?"number"!=typeof n&&(r=n,n=1):2===arguments.length&&(n=1),n!==parseInt(n,10)||1>n)throw"numRounds must a integer >= 1";switch(t){case"HEX":i=u;break;case"B64":i=a;break;case"BYTES":i=f;break;default:throw"format must be HEX, B64, or BYTES"}if("SHA-1"!==e)throw"Chosen SHA variant is not supported";for(o=0;n>o;o+=1)s=c(s,g),g=160;return i(s,h(r))},this.getHMAC=function(e,t,s,b,d){var v,E,m,T,S=[],A=[];switch(v=null,b){case"HEX":b=u;break;case"B64":b=a;break;case"BYTES":b=f;break;default:throw"outputFormat must be HEX, B64, or BYTES"}if("SHA-1"!==s)throw"Chosen SHA variant is not supported";if(E=64,T=160,"HEX"===t)v=r(e),m=v.binLen,v=v.value;else if("TEXT"===t||"ASCII"===t)v=n(e,g),m=v.binLen,v=v.value;else if("B64"===t)v=i(e),m=v.binLen,v=v.value;else{if("BYTES"!==t)throw"inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";v=o(e),m=v.binLen,v=v.value}if(e=8*E,t=E/4-1,m/8>E){if("SHA-1"!==s)throw"Unexpected error in HMAC implementation";for(v=c(v,m);v.length<=t;)v.push(0);v[t]&=4294967040}else if(E>m/8){for(;v.length<=t;)v.push(0);v[t]&=4294967040}for(E=0;t>=E;E+=1)S[E]=909522486^v[E],A[E]=1549556828^v[E];if("SHA-1"!==s)throw"Unexpected error in HMAC implementation";return s=c(A.concat(c(S.concat(p),e+l)),e+T),b(s,h(d))}}function n(e,t){var n,r,o,i,u=[],a=[],f=0;if("UTF8"===t)for(r=0;r<e.length;r+=1)for(n=e.charCodeAt(r),a=[],128>n?a.push(n):2048>n?(a.push(192|n>>>6),a.push(128|63&n)):55296>n||n>=57344?a.push(224|n>>>12,128|n>>>6&63,128|63&n):(r+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),a.push(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n)),o=0;o<a.length;o+=1){for(i=f>>>2;u.length<=i;)u.push(0);u[i]|=a[o]<<24-f%4*8,f+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(r=0;r<e.length;r+=1){for(n=e.charCodeAt(r),"UTF16LE"===t&&(o=255&n,n=o<<8|n>>8),i=f>>>2;u.length<=i;)u.push(0);u[i]|=n<<16-f%4*8,f+=2}return{value:u,binLen:8*f}}function r(e){var t,n,r,o=[],i=e.length;if(0!==i%2)throw"String of HEX type must be in byte increments";for(t=0;i>t;t+=2){if(n=parseInt(e.substr(t,2),16),isNaN(n))throw"String of HEX type contains invalid characters";for(r=t>>>3;o.length<=r;)o.push(0);o[t>>>3]|=n<<24-t%8*4}return{value:o,binLen:4*i}}function o(e){var t,n,r,o=[];for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r=n>>>2,o.length<=r&&o.push(0),o[r]|=t<<24-n%4*8;return{value:o,binLen:8*e.length}}function i(e){var t,n,r,o,i,u=[],a=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(n=e.indexOf("="),e=e.replace(/\=/g,""),-1!==n&&n<e.length)throw"Invalid '=' found in base-64 string";for(n=0;n<e.length;n+=4){for(i=e.substr(n,4),r=o=0;r<i.length;r+=1)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i[r]),o|=t<<18-6*r;for(r=0;r<i.length-1;r+=1){for(t=a>>>2;u.length<=t;)u.push(0);u[t]|=(o>>>16-8*r&255)<<24-a%4*8,a+=1}}return{value:u,binLen:8*a}}function u(e,t){var n,r,o="",i=4*e.length;for(n=0;i>n;n+=1)r=e[n>>>2]>>>8*(3-n%4),o+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return t.outputUpper?o.toUpperCase():o}function a(e,t){var n,r,o,i="",u=4*e.length;for(n=0;u>n;n+=3)for(o=n+1>>>2,r=e.length<=o?0:e[o],o=n+2>>>2,o=e.length<=o?0:e[o],o=(e[n>>>2]>>>8*(3-n%4)&255)<<16|(r>>>8*(3-(n+1)%4)&255)<<8|o>>>8*(3-(n+2)%4)&255,r=0;4>r;r+=1)i=8*n+6*r<=32*e.length?i+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63):i+t.b64Pad;return i}function f(e){var t,n,r="",o=4*e.length;for(t=0;o>t;t+=1)n=e[t>>>2]>>>8*(3-t%4)&255,r+=String.fromCharCode(n);return r}function h(e){var t={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(t.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad)}catch(n){}if("boolean"!=typeof t.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof t.b64Pad)throw"Invalid b64Pad formatting option";return t}function s(e,t){return e<<t|e>>>32-t}function l(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function p(e,t,n,r,o){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&o);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(o>>>16)+(i>>>16)&65535)<<16|65535&i}function c(e,t){var n,r,o,i,u,a,f,h,c,g=[],b=[1732584193,4023233417,2562383102,271733878,3285377520];for(n=(t+65>>>9<<4)+15;e.length<=n;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[n]=t,c=e.length,f=0;c>f;f+=16){for(n=b[0],r=b[1],o=b[2],i=b[3],u=b[4],h=0;80>h;h+=1)g[h]=16>h?e[h+f]:s(g[h-3]^g[h-8]^g[h-14]^g[h-16],1),a=20>h?p(s(n,5),r&o^~r&i,u,1518500249,g[h]):40>h?p(s(n,5),r^o^i,u,1859775393,g[h]):60>h?p(s(n,5),r&o^r&i^o&i,u,2400959708,g[h]):p(s(n,5),r^o^i,u,3395469782,g[h]),u=i,i=o,o=s(r,30),r=n,n=a;b[0]=l(n,b[0]),b[1]=l(r,b[1]),b[2]=l(o,b[2]),b[3]=l(i,b[3]),b[4]=l(u,b[4])}return b}"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=t:exports=t:e.jsSHA=t}(this);